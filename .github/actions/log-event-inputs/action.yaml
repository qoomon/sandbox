name: 'CHANGE ME'
description: 'CHANGE ME'
author: 'CHANGE ME'
branding:
  icon: box
  color: blue

inputs:
  redact:
    description: 'Comma separated list of input keys to be redacted'
    required: false

runs:
  using: composite
  steps:
    - name: Log Workflow Inputs
      uses: actions/github-script@v7
      with:
        script: |
          const inputs = {
            redact: core.getInput('redact')?.split(',')?.map(it => it.trim()) ?? []
          }

          let eventInputs
          switch (context.eventName) {
            case 'repository_dispatch':
              eventInputs = context.payload.client_payload;
              break;
            case 'workflow_dispatch':
            default:
              eventInputs = context.payload.inputs;
          }
          
          if(eventInputs) {
            core.setOutput('inputs', eventInputs);
            for (const [key, value] of Object.entries(eventPayload)) {
              core.info(`${key}: ${inputs.redact.includes(key) ? '***' : value}`)
              core.setOutput(key, value);
            }
          }
