name: ~ Sandbox
on:
  workflow_dispatch:
  push:
    paths-ignore:
      - dummy.txt
    branches:
      - master

permissions:
  id-token: write # This is required for requesting OIDC token
  contents: write
  
jobs:
  doThis:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            const workflowRun = await github.rest.actions.getWorkflowRun({
              ...context.repo,
              run_id: context.runId,
            }).then((res) => res.data)

            console.log('workflowRun', {
              name: workflowRun.name,
              workflow_id: workflowRun.workflow_id,
              id: workflowRun.id,
              run_number: workflowRun.run_number,
              run_attempt: workflowRun.run_attempt,
            })
            
            const recentWorkflowRuns = await github.rest.actions.listWorkflowRuns({
              ...context.repo,
              workflow_id: workflowRun.workflow_id,
            }).then((res) => res.data.workflow_runs)

            const mostRecentWorkflowRun = recentWorkflowRuns[0]
            
            console.log('recentWorkflowRun', {
              name: mostRecentWorkflowRun.name,
              workflow_id: mostRecentWorkflowRun.workflow_id,
              id: mostRecentWorkflowRun.id,
              run_number: mostRecentWorkflowRun.run_number,
              run_attempt: mostRecentWorkflowRun.run_attempt,
            })
