name: ⚙️ Sandbox
on:
  push: 
  workflow_dispatch:
    
jobs:
  playground:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: |
          env | grep -e RUNNER_
          ps aux | grep Runner.Worker
      - uses: actions/github-script@v7
        with:
          script: |
            // RUNNER_TEMP=/home/runner/work/_temp
            // runner process: /home/runner/actions-runner/cached/bin/Runner.Worker
            // runner dir: /home/runner/actions-runner/cached/_diag
            // Worker_*.log
            // line: "INFO JobRunner] Job ID <<<UUID>>>"

          
            const {owner, repo} = context.repo;
            const workflowRun = await github.rest.actions.getWorkflowRun({
              owner, repo,
              run_id: context.runId,
            }).then((res) => res.data);
            console.log("workflowRun.check_suite_id:", workflowRun.check_suite_id);
            
            // https://octokit.github.io/rest.js/v22/
            const checkRuns = await github.rest.checks.listForSuite({
              owner, repo,
              check_suite_id: workflowRun.check_suite_id,
              check_name: context.job,
              status: "in_progress",
              filter: "latest",
              // TODO per_page
            }).then((res) => res.data);
            console.log("checkRuns:", checkRuns);

            const checkRun = checkRuns.check_runs.find((checkRun) => checkRun.external_id == "UUID");
            console.log("checkRun:", checkRun);
                       
  
